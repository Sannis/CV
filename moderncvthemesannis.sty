%% start of file `moderncvthemesannis.sty'.
%% based on `moderncvthemeclassic.sty'.
%% Copyright 2011 Oleg Efimov (efimovov@gmail.com).
%% Copyright 2006-2010 Xavier Danaux (xdanaux@gmail.com).
%
% This work may be distributed and/or modified under the
% conditions of the LaTeX Project Public License version 1.3c,
% available at http://www.latex-project.org/lppl/.


%-------------------------------------------------------------------------------
%                identification
%-------------------------------------------------------------------------------
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{moderncvthemesannis}[2011/02/07 v0.1 modern curriculum vitae style: for Sannis' resume]


%-------------------------------------------------------------------------------
%                required packages
%-------------------------------------------------------------------------------


%-------------------------------------------------------------------------------
%                package options
%-------------------------------------------------------------------------------
% color options
% blue (default option)
\DeclareOption{blue}{}
% orange
\newif\if@colororange\@colororangefalse
\DeclareOption{orange}{\@colororangetrue}
% green
\newif\if@colorgreen\@colorgreenfalse
\DeclareOption{green}{\@colorgreentrue}
% red
\newif\if@colorred\@colorredfalse
\DeclareOption{red}{\@colorredtrue}
% grey
\newif\if@colorgrey\@colorgreyfalse
\DeclareOption{grey}{\@colorgreytrue}

% unused options
\DeclareOption*{
  \PackageWarning{moderncvthemesannis}{Unknown option ‘\CurrentOption’}}

% execute default options
\ExecuteOptions{color}

% process given options
\ProcessOptions\relax


%-------------------------------------------------------------------------------
%                style definition
%-------------------------------------------------------------------------------
% symbols used
\renewcommand*{\addresssymbol}{{\includegraphics[width=11pt]{icons/address.png}}}
\renewcommand*{\mobilesymbol}{{\includegraphics[width=11pt]{icons/mobile.png}}}
\renewcommand*{\phonesymbol}{{\includegraphics[width=11pt]{icons/phone.png}}}
%\providecommand*{\faxsymbol}{\FAX}
\renewcommand*{\homepagesymbol}{{\includegraphics[width=11pt]{icons/homepage.png}}}
\renewcommand*{\emailsymbol}{{\includegraphics[width=11pt]{icons/email.png}}}
\providecommand*{\jabbersymbol}{{\includegraphics[width=11pt]{icons/jabber.png}}}
\providecommand*{\twittersymbol}{{\includegraphics[width=11pt]{icons/twitter.png}}}
\providecommand*{\habrahabrsymbol}{{\includegraphics[width=11pt]{icons/habrahabr.png}}}
\providecommand*{\vkontaktesymbol}{{\includegraphics[width=11pt]{icons/vkontakte.png}}}


% colors
\definecolor{firstnamecolor}{rgb}{0.35,0.35,0.35}
\definecolor{familynamecolor}{rgb}{0.25,0.25,0.25}
\definecolor{titlecolor}{rgb}{0.35,0.35,0.35}
\definecolor{quotecolor}{rgb}{0.35,0.35,0.35}
% default blue color
  \definecolor{addresscolor}{rgb}{0.25,0.5,0.75}
  \definecolor{sectionrectanglecolor}{rgb}{0.25,0.5,0.75}
  \definecolor{sectiontitlecolor}{rgb}{0.2,0.4,0.65}
  \definecolor{subsectioncolor}{rgb}{0.2,0.4,0.65}
\if@colororange
  \definecolor{addresscolor}{rgb}{0.95,0.55,0.15}
  \definecolor{sectionrectanglecolor}{rgb}{1,0.65,0.20}
  \definecolor{sectiontitlecolor}{rgb}{0.95,0.55,0.15}
  \definecolor{subsectioncolor}{rgb}{0.95,0.55,0.15}\fi
\if@colorgreen
  \definecolor{addresscolor}{rgb}{0.30,0.65,0.15}
  \definecolor{sectionrectanglecolor}{rgb}{0.55,0.85,0.35}
  \definecolor{sectiontitlecolor}{rgb}{0.30,0.65,0.15}
  \definecolor{subsectioncolor}{rgb}{0.30,0.65,0.15}\fi
\if@colorred
  \definecolor{addresscolor}{rgb}{0.95,0.20,0.20}
  \definecolor{sectionrectanglecolor}{rgb}{1.00,0.30,0.30}
  \definecolor{sectiontitlecolor}{rgb}{0.95,0.20,0.20}
  \definecolor{subsectioncolor}{rgb}{0.95,0.20,0.20}\fi
\if@colorgrey
  \definecolor{addresscolor}{rgb}{0.35,0.35,0.35}
  \definecolor{sectionrectanglecolor}{rgb}{0.75,0.75,0.75}
  \definecolor{sectiontitlecolor}{rgb}{0.35,0.35,0.35}
  \definecolor{subsectioncolor}{rgb}{0.35,0.35,0.35}\fi

% fonts
\AtBeginDocument{\sffamily}
\renewcommand*{\firstnamefont}{\fontsize{24}{28}\sffamily\mdseries\upshape}
\renewcommand*{\familynamefont}{\firstnamefont}
\renewcommand*{\addressfont}{\normalsize\sffamily\mdseries\slshape}
\renewcommand*{\quotefont}{\large\slshape}
\renewcommand*{\sectionfont}{\Large\sffamily\mdseries\upshape}
\renewcommand*{\subsectionfont}{\large\sffamily\mdseries\upshape}

% styles

% maketitle
%   setmaketitlenamemaxwidth to the full name length, capped by \maketitlenamemaxwidth
\newlength{\maketitlenamemaxwidth}
\setlength{\maketitlenamemaxwidth}{.525\textwidth}
\newlength{\maketitlenamefullwidth}
\settowidth{\maketitlenamefullwidth}{\firstnamestyle{\@firstname~}\familynamestyle{\@familyname}}
\newlength{\maketitlenamewidth}
\ifnum\maketitlenamemaxwidth<\maketitlenamefullwidth\setlength{\maketitlenamewidth}{\maketitlenamemaxwidth}\else\setlength{\maketitlenamewidth}{\maketitlenamefullwidth}\fi
%   other lengths
\newlength{\maketitlepicturewidth}
\setlength{\maketitlepicturewidth}{\@photowidth}
\newlength{\maketitledetailswidth}
%   framebox lengths
%\setlength{\fboxsep}{\fboxsep}
\setlength{\fboxsep}{0ex}
\setlength{\fboxrule}{.25ex}
%   recompute theme-specific lengths, called by class to recompute all lengths
\renewcommand*{\recomputethemelengths}{%
  \setlength{\maketitledetailswidth}{\textwidth}%
  \ifthenelse{\lengthtest{\maketitlepicturewidth=0pt}}%
  	{}%
  	{\addtolength{\maketitledetailswidth}{-\separatorcolumnwidth}%
  	\addtolength{\maketitledetailswidth}{-\maketitlepicturewidth}%
  	\addtolength{\maketitledetailswidth}{-2\fboxsep}%
  	\addtolength{\maketitledetailswidth}{-2\fboxrule}}}
\recomputethemelengths
\newif\if@firstdetailselement\@firstdetailselementtrue
\newcommand*{\maketitledetailsnewline}{
  \if@firstdetailselement%
    \@firstdetailselementfalse%
  \else%
    \\[.2em]\fi}
\renewcommand*{\maketitle}{%
  % name and title
  \begin{minipage}[b]{\textwidth}%
    \firstnamestyle{\@firstname~}\familynamestyle{\@familyname}\\[-0.35em]%
    {\color{firstnamecolor}\rule{\textwidth}{.25ex}}%
  \end{minipage}\\[1em]%
  \begin{minipage}[t]{\maketitledetailswidth}%
    % optional data
    \ifthenelse{\isundefined{\@addresscity}}{}{%
      \maketitledetailsnewline%
      \addresssymbol~\@addresscity%
      \ifthenelse{\isundefined{\@addressstreet}}{}{, \@addressstreet}}%
    \ifthenelse{\isundefined{\@mobile}}{}{\maketitledetailsnewline\mobilesymbol~\@mobile}%
    \ifthenelse{\isundefined{\@phone}}{}{\maketitledetailsnewline\phonesymbol~\@phone}%
    \ifthenelse{\isundefined{\@fax}}{}{\maketitledetailsnewline\faxsymbol~\@fax}%
    \ifthenelse{\isundefined{\@email}}{}{\maketitledetailsnewline\emailsymbol~\emaillink{\@email}}%
    \ifthenelse{\isundefined{\@jabber}}{}{\maketitledetailsnewline\jabbersymbol~\@jabber}%
    \ifthenelse{\isundefined{\@homepage}}{}{\maketitledetailsnewline\homepagesymbol~\httplink{\@homepage}}%
    \ifthenelse{\isundefined{\@twitter}}{}{\maketitledetailsnewline\twittersymbol~\httplink[\@twitter]{twitter.com/\@twitter}}%
    \ifthenelse{\isundefined{\@habrahabr}}{}{\maketitledetailsnewline\habrahabrsymbol~\httplink[\@habrahabr]{\@habrahabr.habrahabr.ru}}%
    \ifthenelse{\isundefined{\@vkontakte}}{}{\maketitledetailsnewline\vkontaktesymbol~\httplink[\@vkontakte]{vkontakte.ru/\@vkontakte}}%
    \ifthenelse{\isundefined{\@extrainfo}}{}{\maketitledetailsnewline\@extrainfo}%
  \end{minipage}%
  % optional photo
  \ifthenelse{\isundefined{\@photo}}%
    {}%
    {%
      \hspace*{\separatorcolumnwidth}%
      \begin{minipage}[t]{\maketitlepicturewidth}%
        \raggedright{}\addressfont\color{addresscolor}%  required to correctly align content
        \framebox{\includegraphics[width=\maketitlepicturewidth]{\@photo}}%
      \end{minipage}}%
  % optional quote
  \ifthenelse{\isundefined{\@quote}}%
    {}%
    {\\[1em]{\centering{}\begin{minipage}{\quotewidth}\centering\quotestyle{\@quote}\end{minipage}}}%
  }

\endinput


%% end of file `moderncvthemesannis.sty'.
